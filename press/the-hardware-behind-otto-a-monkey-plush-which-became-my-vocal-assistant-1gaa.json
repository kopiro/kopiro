{
  "type_of": "article",
  "id": 413659,
  "title": "The hardware behind Otto: a monkey plush which became my vocal assistant",
  "description": "Otto is a monkey plush that we found in a highway store during a trip with my girlfriend in February...",
  "readable_publish_date": "Jul 30 '20",
  "slug": "the-hardware-behind-otto-a-monkey-plush-which-became-my-vocal-assistant-1gaa",
  "path": "/kopiro/the-hardware-behind-otto-a-monkey-plush-which-became-my-vocal-assistant-1gaa",
  "url": "https://dev.to/kopiro/the-hardware-behind-otto-a-monkey-plush-which-became-my-vocal-assistant-1gaa",
  "comments_count": 0,
  "public_reactions_count": 2,
  "collection_id": null,
  "published_timestamp": "2020-07-30T09:55:44Z",
  "language": "en",
  "subforem_id": null,
  "positive_reactions_count": 2,
  "cover_image": null,
  "social_image": "https://media2.dev.to/dynamic/image/width=1000,height=500,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F028ubvdy3egiuhm39vhh.png",
  "canonical_url": "https://dev.to/kopiro/the-hardware-behind-otto-a-monkey-plush-which-became-my-vocal-assistant-1gaa",
  "created_at": "2020-07-30T09:52:08Z",
  "edited_at": "2020-07-30T09:58:44Z",
  "crossposted_at": null,
  "published_at": "2020-07-30T09:55:44Z",
  "last_comment_at": "2020-07-30T09:55:44Z",
  "reading_time_minutes": 4,
  "tag_list": "raspberrypi, electronics, ai",
  "tags": [
    "raspberrypi",
    "electronics",
    "ai"
  ],
  "body_html": "<p>Otto is a monkey plush that we found in a highway store during a trip with my girlfriend in February 2017.</p>\n\n<p>Its ability, while being extremely cute, was to listen to you, then walk and repeat all things with a higher pitch.</p>\n\n<p>My goal was to make it more powerful by transforming it into a vocal assistant.</p>\n\n<p><a href=\"https://res.cloudinary.com/practicaldev/image/fetch/s--wg4n7Op1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://cdn-images-1.medium.com/max/3840/1%2A6F4ncy2Ji3laeQ2ZdgcQBA.png\" class=\"article-body-image-wrapper\"><img src=\"https://res.cloudinary.com/practicaldev/image/fetch/s--wg4n7Op1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://cdn-images-1.medium.com/max/3840/1%2A6F4ncy2Ji3laeQ2ZdgcQBA.png\" alt=\"SkeletOtto and Otto\" loading=\"lazy\" width=\"800\" height=\"534\"></a><em>SkeletOtto and Otto</em></p>\n\n<p>This is the first part of a series about Otto.</p>\n\n<p>Originally, it was composed by the following hardware:</p>\n\n<ul>\n<li><p>A motor connected to his legs for allowing him to walk</p></li>\n<li><p>A simple, closed (for modifications), built-in board</p></li>\n<li><p>A microphone and a speaker</p></li>\n<li><p>A push button to start the listening phase</p></li>\n<li><p>Four AA batteries</p></li>\n<li><p>A switch to completely power off the circuit</p></li>\n</ul>\n\n<p>I wanted to replace all these things with fresh and <strong>programmable</strong> hardware.</p>\n\n<p>The real challenge here was to find the rights components that fitted in the original enclosure. The available space wasn’t much, so every choice had to be done conscientiously.</p>\n\n<h3>\n  <a name=\"base-board\" href=\"#base-board\">\n  </a>\n  Base board\n</h3>\n\n<p>The preferred hardware for this project are Raspberry PI boards.</p>\n\n<p>They are tiny and powerful enough to allow developers to use a high-level programming language and built-in libraries without flashing the software every-time.</p>\n\n<p>Furthermore, you can debug your application in a more comfortable environment.</p>\n\n<p>The best hardware at the time was the Raspberry Pi Zero W. Launched at the end of February 2017, the Pi Zero W has all the functionality of the original Pi Zero but with added connectivity.</p>\n\n<p><a href=\"https://res.cloudinary.com/practicaldev/image/fetch/s--5_7y9Un5--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://cdn-images-1.medium.com/max/3888/1%2APiGGkpQ-b6g5yj5wb1-fLQ.png\" class=\"article-body-image-wrapper\"><img src=\"https://res.cloudinary.com/practicaldev/image/fetch/s--5_7y9Un5--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://cdn-images-1.medium.com/max/3888/1%2APiGGkpQ-b6g5yj5wb1-fLQ.png\" alt=\"Raspberry Pi Zero W\" loading=\"lazy\" width=\"800\" height=\"450\"></a><em>Raspberry Pi Zero W</em></p>\n\n<p>The board was not enough for such a project, so I added additional hardware.</p>\n\n<h3>\n  <a name=\"audio-components\" href=\"#audio-components\">\n  </a>\n  Audio components\n</h3>\n\n<p>To build a vocal assistant, we need audio components. The requirements for these components are, of course, a speaker and a microphone.</p>\n\n<p>For the microphone, I tried a USB microphone. The problem with this accessory was that it was not as sensible as I wished. Furthermore, an additional USB hub was required to connect it.</p>\n\n<p>Moreover, I couldn’t connect a raw speaker easily.</p>\n\n<p>For this reason, I opted to buy an additional board that accomplished this task very well: <a href=\"https://www.seeedstudio.com/ReSpeaker-2-Mics-Pi-HAT-p-2874.html\">ReSpeaker 2-Mics Pi HAT</a>.</p>\n\n<p>ReSpeaker 2-Mics Pi HAT is a dual-microphone expansion board for Raspberry Pi designed for AI and voice applications.</p>\n\n<p>The board is developed based on WM8960, a low power stereo codec. There are 2 microphones on both sides of the board for collecting sounds. It also provides 3 APA102 RGB LEDs, 1 User Button, and 2 on-board Grove interfaces.</p>\n\n<p>I did not plan to connect LEDs to my board, but the fact that this HAT has built-in LEDs made me think to use them.</p>\n\n<p><a href=\"https://res.cloudinary.com/practicaldev/image/fetch/s--h9-FHC0g--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://cdn-images-1.medium.com/max/5036/1%2ALdQqWbPWsAO_IrIrbQ6wBw.png\" class=\"article-body-image-wrapper\"><img src=\"https://res.cloudinary.com/practicaldev/image/fetch/s--h9-FHC0g--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://cdn-images-1.medium.com/max/5036/1%2ALdQqWbPWsAO_IrIrbQ6wBw.png\" alt=\"ReSpeaker 2-Mics Pi HAT — Hardware specifications\" loading=\"lazy\" width=\"800\" height=\"463\"></a><em>ReSpeaker 2-Mics Pi HAT — Hardware specifications</em></p>\n\n<p>Then I took an old Bluetooth mini-speaker, disassembled it, and connected it to the JST 2.0 Speaker Out port.</p>\n\n<p>To make it work, you have to install their drivers on your board. Drivers are also used to control LEDs within your application via a standard protocol.</p>\n\n<p><a href=\"https://res.cloudinary.com/practicaldev/image/fetch/s--GpvNf4A8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://cdn-images-1.medium.com/max/2000/1%2ASFSiK1pvfllTR6Yik4gtoA.png\" class=\"article-body-image-wrapper\"><img src=\"https://res.cloudinary.com/practicaldev/image/fetch/s--GpvNf4A8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://cdn-images-1.medium.com/max/2000/1%2ASFSiK1pvfllTR6Yik4gtoA.png\" alt=\"ReSpeaker 2-Mics Pi HAT\" loading=\"lazy\" width=\"700\" height=\"525\"></a><em>ReSpeaker 2-Mics Pi HAT</em></p>\n\n<p><em>Hint: when you install a shield, all your GPIO pins are covered. It’s useful to know which pins are **really used</em>* by your board. To accomplish that, use <a href=\"https://pinout.xyz/\">https://pinout.xyz/</a>*</p>\n\n<p>For example, for this board, check out this link: <a href=\"https://pinout.xyz/pinout/respeaker_2_mics_phat\">https://pinout.xyz/pinout/respeaker_2_mics_phat</a></p>\n\n<h3>\n  <a name=\"powering-the-board\" href=\"#powering-the-board\">\n  </a>\n  Powering the board\n</h3>\n\n<p>The Raspberry Pi board can be easily powered via USB 5V input. The problem with this approach is that you have to buy a battery pack and connect it via USB.</p>\n\n<p>I didn’t find any battery pack small enough to fit my plush, then my unique alternative was using LiPo batteries.</p>\n\n<p><a href=\"https://res.cloudinary.com/practicaldev/image/fetch/s--y4Bzp2AE--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://cdn-images-1.medium.com/max/2048/1%2A47fQNM9dZmH2EbOlassALw.png\" class=\"article-body-image-wrapper\"><img src=\"https://res.cloudinary.com/practicaldev/image/fetch/s--y4Bzp2AE--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://cdn-images-1.medium.com/max/2048/1%2A47fQNM9dZmH2EbOlassALw.png\" alt=\"LiPo Battery — 3.7V 2000mAh\" loading=\"lazy\" width=\"800\" height=\"800\"></a><em>LiPo Battery — 3.7V 2000mAh</em></p>\n\n<p>You can’t connect your LiPo battery to your board, you have to use a converter. It can be powered by any 3.7V LiIon/LiPoly battery, and then it converts the battery output to 5.2V DC.</p>\n\n<p>Initially, I bought a <a href=\"https://shop.pimoroni.com/products/lipo-shim\">LiPo SHIM</a>, but I didn’t notice that this controller provides power to your board without charging your batteries.</p>\n\n<p>For this reason, I switched to <a href=\"https://shop.pimoroni.com/products/powerboost-500-charger-rechargeable-5v-lipo-usb-boost-500ma\">Adafruit PowerBoost 500 Charger.</a>** It has a built-in battery charger circuit. You’ll be able to keep your project running even while charging the battery!</p>\n\n<p><a href=\"https://res.cloudinary.com/practicaldev/image/fetch/s--pwQSe6tS--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://cdn-images-1.medium.com/max/2000/1%2Af2vaMtaDD3NpjWMVKKUFTg.png\" class=\"article-body-image-wrapper\"><img src=\"https://res.cloudinary.com/practicaldev/image/fetch/s--pwQSe6tS--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://cdn-images-1.medium.com/max/2000/1%2Af2vaMtaDD3NpjWMVKKUFTg.png\" alt=\"Adafruit PowerBoost 500 Charger\" loading=\"lazy\" width=\"500\" height=\"500\"></a><em>Adafruit PowerBoost 500 Charger</em></p>\n\n<h3>\n  <a name=\"additional-hardware\" href=\"#additional-hardware\">\n  </a>\n  Additional hardware\n</h3>\n\n<p>The software uses the “hot-word” concept to start the interaction. Basically, it continuously listens for a hot-word, like “Hey Otto”, then you just talk and say commands.</p>\n\n<p>For having an alternative method to start the interaction, I installed a** push-button **connected directly to the GPIO board, at the GPIO8 pin.</p>\n\n<p><a href=\"https://res.cloudinary.com/practicaldev/image/fetch/s--SOFz4Pza--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://cdn-images-1.medium.com/max/2000/1%2A53tODwL8Me43CcBwxxM_Aw.png\" class=\"article-body-image-wrapper\"><img src=\"https://res.cloudinary.com/practicaldev/image/fetch/s--SOFz4Pza--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://cdn-images-1.medium.com/max/2000/1%2A53tODwL8Me43CcBwxxM_Aw.png\" alt=\"Push button\" loading=\"lazy\" width=\"155\" height=\"155\"></a><em>Push button</em></p>\n\n<p>Now only one thing was missing: <strong>the power on-off switch.</strong></p>\n\n<p>I connected this simple component to the PowerBoost Charger via its ENABLE port. The purpose of the ENABLE port is to disconnect the output completely.</p>\n\n<p><a href=\"https://res.cloudinary.com/practicaldev/image/fetch/s--ffuEoAlh--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://cdn-images-1.medium.com/max/2000/1%2AVFUf4JhqAEdtFMRPaanIyQ.png\" class=\"article-body-image-wrapper\"><img src=\"https://res.cloudinary.com/practicaldev/image/fetch/s--ffuEoAlh--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://cdn-images-1.medium.com/max/2000/1%2AVFUf4JhqAEdtFMRPaanIyQ.png\" alt=\"Power on-off switch\" loading=\"lazy\" width=\"130\" height=\"130\"></a><em>Power on-off switch</em></p>\n\n<h3>\n  <a name=\"connect-everything-together\" href=\"#connect-everything-together\">\n  </a>\n  Connect everything together\n</h3>\n\n<p>Here you can see in details the complete circuit diagram (<a href=\"https://www.circuit-diagram.org/circuits/0d85ce05\">https://www.circuit-diagram.org/circuits/0d85ce05</a>)</p>\n\n<p><a href=\"https://res.cloudinary.com/practicaldev/image/fetch/s--JMbksWlc--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://cdn-images-1.medium.com/max/2000/1%2A20YKeucZQeWsURbkakN91Q.png\" class=\"article-body-image-wrapper\"><img src=\"https://res.cloudinary.com/practicaldev/image/fetch/s--JMbksWlc--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://cdn-images-1.medium.com/max/2000/1%2A20YKeucZQeWsURbkakN91Q.png\" alt=\"Otto Circuit diagram\" loading=\"lazy\" width=\"800\" height=\"494\"></a><em>Otto Circuit diagram</em></p>\n\n<p>And here a snapshot of the work:</p>\n\n<p><a href=\"https://res.cloudinary.com/practicaldev/image/fetch/s--QELS-Wro--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://cdn-images-1.medium.com/max/8992/1%2AobNKyfbvgL3dUcVR3tK-6A.jpeg\" class=\"article-body-image-wrapper\"><img src=\"https://res.cloudinary.com/practicaldev/image/fetch/s--QELS-Wro--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://cdn-images-1.medium.com/max/8992/1%2AobNKyfbvgL3dUcVR3tK-6A.jpeg\" alt=\"The hardware behind Otto\" loading=\"lazy\" width=\"800\" height=\"534\"></a><em>The hardware behind Otto</em></p>\n\n",
  "body_markdown": "Otto is a monkey plush that we found in a highway store during a trip with my girlfriend in February 2017.\n\nIts ability, while being extremely cute, was to listen to you, then walk and repeat all things with a higher pitch.\n\nMy goal was to make it more powerful by transforming it into a vocal assistant.\n\n![SkeletOtto and Otto](https://cdn-images-1.medium.com/max/3840/1*6F4ncy2Ji3laeQ2ZdgcQBA.png)*SkeletOtto and Otto*\n\nThis is the first part of a series about Otto.\n\nOriginally, it was composed by the following hardware:\n\n* A motor connected to his legs for allowing him to walk\n\n* A simple, closed (for modifications), built-in board\n\n* A microphone and a speaker\n\n* A push button to start the listening phase\n\n* Four AA batteries\n\n* A switch to completely power off the circuit\n\nI wanted to replace all these things with fresh and **programmable** hardware.\n\nThe real challenge here was to find the rights components that fitted in the original enclosure. The available space wasn’t much, so every choice had to be done conscientiously.\n\n### Base board\n\nThe preferred hardware for this project are Raspberry PI boards.\n\nThey are tiny and powerful enough to allow developers to use a high-level programming language and built-in libraries without flashing the software every-time.\n\nFurthermore, you can debug your application in a more comfortable environment.\n\nThe best hardware at the time was the Raspberry Pi Zero W. Launched at the end of February 2017, the Pi Zero W has all the functionality of the original Pi Zero but with added connectivity.\n\n![Raspberry Pi Zero W](https://cdn-images-1.medium.com/max/3888/1*PiGGkpQ-b6g5yj5wb1-fLQ.png)*Raspberry Pi Zero W*\n\nThe board was not enough for such a project, so I added additional hardware.\n\n### Audio components\n\nTo build a vocal assistant, we need audio components. The requirements for these components are, of course, a speaker and a microphone.\n\nFor the microphone, I tried a USB microphone. The problem with this accessory was that it was not as sensible as I wished. Furthermore, an additional USB hub was required to connect it.\n\nMoreover, I couldn’t connect a raw speaker easily.\n\nFor this reason, I opted to buy an additional board that accomplished this task very well: [ReSpeaker 2-Mics Pi HAT](https://www.seeedstudio.com/ReSpeaker-2-Mics-Pi-HAT-p-2874.html).\n\nReSpeaker 2-Mics Pi HAT is a dual-microphone expansion board for Raspberry Pi designed for AI and voice applications.\n\nThe board is developed based on WM8960, a low power stereo codec. There are 2 microphones on both sides of the board for collecting sounds. It also provides 3 APA102 RGB LEDs, 1 User Button, and 2 on-board Grove interfaces.\n\nI did not plan to connect LEDs to my board, but the fact that this HAT has built-in LEDs made me think to use them.\n\n![ReSpeaker 2-Mics Pi HAT — Hardware specifications](https://cdn-images-1.medium.com/max/5036/1*LdQqWbPWsAO_IrIrbQ6wBw.png)*ReSpeaker 2-Mics Pi HAT — Hardware specifications*\n\nThen I took an old Bluetooth mini-speaker, disassembled it, and connected it to the JST 2.0 Speaker Out port.\n\nTo make it work, you have to install their drivers on your board. Drivers are also used to control LEDs within your application via a standard protocol.\n\n![ReSpeaker 2-Mics Pi HAT](https://cdn-images-1.medium.com/max/2000/1*SFSiK1pvfllTR6Yik4gtoA.png)*ReSpeaker 2-Mics Pi HAT*\n\n*Hint: when you install a shield, all your GPIO pins are covered. It’s useful to know which pins are **really used** by your board. To accomplish that, use [https://pinout.xyz/](https://pinout.xyz/)*\n\nFor example, for this board, check out this link: [https://pinout.xyz/pinout/respeaker_2_mics_phat](https://pinout.xyz/pinout/respeaker_2_mics_phat)\n\n### Powering the board\n\nThe Raspberry Pi board can be easily powered via USB 5V input. The problem with this approach is that you have to buy a battery pack and connect it via USB.\n\nI didn’t find any battery pack small enough to fit my plush, then my unique alternative was using LiPo batteries.\n\n![LiPo Battery — 3.7V 2000mAh](https://cdn-images-1.medium.com/max/2048/1*47fQNM9dZmH2EbOlassALw.png)*LiPo Battery — 3.7V 2000mAh*\n\nYou can’t connect your LiPo battery to your board, you have to use a converter. It can be powered by any 3.7V LiIon/LiPoly battery, and then it converts the battery output to 5.2V DC.\n\nInitially, I bought a [LiPo SHIM](https://shop.pimoroni.com/products/lipo-shim), but I didn’t notice that this controller provides power to your board without charging your batteries.\n\nFor this reason, I switched to [Adafruit PowerBoost 500 Charger.](https://shop.pimoroni.com/products/powerboost-500-charger-rechargeable-5v-lipo-usb-boost-500ma)** It has a built-in battery charger circuit. You’ll be able to keep your project running even while charging the battery!\n\n![Adafruit PowerBoost 500 Charger](https://cdn-images-1.medium.com/max/2000/1*f2vaMtaDD3NpjWMVKKUFTg.png)*Adafruit PowerBoost 500 Charger*\n\n### Additional hardware\n\nThe software uses the “hot-word” concept to start the interaction. Basically, it continuously listens for a hot-word, like “Hey Otto”, then you just talk and say commands.\n\nFor having an alternative method to start the interaction, I installed a** push-button **connected directly to the GPIO board, at the GPIO8 pin.\n\n![Push button](https://cdn-images-1.medium.com/max/2000/1*53tODwL8Me43CcBwxxM_Aw.png)*Push button*\n\nNow only one thing was missing: **the power on-off switch.**\n\nI connected this simple component to the PowerBoost Charger via its ENABLE port. The purpose of the ENABLE port is to disconnect the output completely.\n\n![Power on-off switch](https://cdn-images-1.medium.com/max/2000/1*VFUf4JhqAEdtFMRPaanIyQ.png)*Power on-off switch*\n\n### Connect everything together\n\nHere you can see in details the complete circuit diagram ([https://www.circuit-diagram.org/circuits/0d85ce05](https://www.circuit-diagram.org/circuits/0d85ce05))\n\n![Otto Circuit diagram](https://cdn-images-1.medium.com/max/2000/1*20YKeucZQeWsURbkakN91Q.png)*Otto Circuit diagram*\n\nAnd here a snapshot of the work:\n\n![The hardware behind Otto](https://cdn-images-1.medium.com/max/8992/1*obNKyfbvgL3dUcVR3tK-6A.jpeg)*The hardware behind Otto*",
  "user": {
    "name": "Flavio Maria De Stefano",
    "username": "kopiro",
    "twitter_username": "destefanoflavio",
    "github_username": "kopiro",
    "user_id": 386888,
    "website_url": "https://www.kopiro.me",
    "profile_image": "https://media2.dev.to/dynamic/image/width=640,height=640,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F386888%2Ff683c0ad-bdf7-4401-9141-46416239d66d.jpg",
    "profile_image_90": "https://media2.dev.to/dynamic/image/width=90,height=90,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F386888%2Ff683c0ad-bdf7-4401-9141-46416239d66d.jpg"
  }
}